\chapter{Settings Manager}
\hypertarget{md__library_2_package_cache_2com_8unity_8settings-manager_0d2_80_81_2_r_e_a_d_m_e}{}\label{md__library_2_package_cache_2com_8unity_8settings-manager_0d2_80_81_2_r_e_a_d_m_e}\index{Settings Manager@{Settings Manager}}
\label{md__library_2_package_cache_2com_8unity_8settings-manager_0d2_80_81_2_r_e_a_d_m_e_autotoc_md483}%
\Hypertarget{md__library_2_package_cache_2com_8unity_8settings-manager_0d2_80_81_2_r_e_a_d_m_e_autotoc_md483}%
 A framework for making any serializable field a setting, complete with an procedurally populated Settings Provider.

\hypertarget{md__library_2_package_cache_2com_8unity_8settings-manager_0d2_80_81_2_r_e_a_d_m_e_autotoc_md484}{}\doxysection{\texorpdfstring{Quick Start}{Quick Start}}\label{md__library_2_package_cache_2com_8unity_8settings-manager_0d2_80_81_2_r_e_a_d_m_e_autotoc_md484}
Settings are saved in {\ttfamily ISettings\+Repository} instances. Two default implementations are provided, one for saving user settings ({\ttfamily User\+Settings\+Repository}) and one for per-\/project settings ({\ttfamily Project\+Settings\+Repository}). Settings repositories are responsible for saving and loading preferences.

You may work directly with {\ttfamily ISettings\+Repository}, or create a {\ttfamily Settings} instance to manage them. Creating a {\ttfamily Settings} is convenient because it allows you to make use of the {\ttfamily User\+Setting} class and attribute.

The most common case will be for packages to create a {\ttfamily Settings} manager with two repositories, one for user settings ({\ttfamily Settings\+Scope.\+User}) and one for per-\/project settings ({\ttfamily Settings\+Scope.\+Project}).

Below is an example of how most packages will use this api.


\begin{DoxyCode}{0}
\DoxyCodeLine{using\ UnityEditor;}
\DoxyCodeLine{using\ UnityEditor.SettingsManagement;}
\DoxyCodeLine{using\ UnityEngine;}
\DoxyCodeLine{}
\DoxyCodeLine{public\ class\ MySettings}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ static\ Settings\ s\_SettingsInstance;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ public\ static\ Settings\ instance}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ get}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ if(s\_SettingsInstance\ ==\ null)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ s\_SettingsInstance\ =\ new\ Settings("{}com.unity.my-\/package"{});}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ return\ s\_SettingsInstance;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ //\ Register\ a\ new\ SettingsProvider\ that\ will\ scrape\ the\ owning\ assembly\ for\ [UserSetting]\ marked\ fields.}
\DoxyCodeLine{\ \ \ \ [SettingsProvider]}
\DoxyCodeLine{\ \ \ \ static\ SettingsProvider\ CreateSettingsProvider()}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ var\ provider\ =\ new\ UserSettingsProvider("{}Preferences/My\ Settings"{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ instance,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ new\ []\ \{\ typeof(MySettings).Assembly\ \});}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ return\ provider;}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{public\ class\ Test}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ [UserSetting("{}User\ Settings"{},\ "{}My\ User\ Int\ Value"{})]}
\DoxyCodeLine{\ \ \ \ static\ UserSetting<int>\ userSetting\ =\ new\ UserSetting<int>(MySettings.instance,\ "{}MyInteger"{},\ 42,\ SettingsScope.User);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ [UserSetting("{}Project\ Settings"{},\ "{}My\ Project\ Int\ Value"{})]}
\DoxyCodeLine{\ \ \ \ static\ UserSetting<int>\ projectSetting\ =\ new\ UserSetting<int>(MySettings.instance,\ "{}MyInteger"{},\ 42,\ SettingsScope.Project);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ [MenuItem("{}Debug/Print\ Settings\ Values"{})]}
\DoxyCodeLine{\ \ \ \ static\ void\ PrintValues()}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ Debug.Log(\$"{}User\ integer\ is:\ \{(int)\ userSetting\},\ and\ project\ integer\ is\ \{(int)\ projectSetting\}"{});}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}}

\end{DoxyCode}


Values are set and retrieved using generic methods on on your {\ttfamily Settings} instance\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{MySettingsManager.instance.Get<float>("{}myFloatValue"{},\ SettingsScopes.Project);}

\end{DoxyCode}


The {\ttfamily Settings} class will handle finding an appropriate {\ttfamily ISettings\+Repository} for the scope (and optional repository name), while {\ttfamily key} and {\ttfamily T} are used to find the value. Setting keys are unique among types, meaning you may re-\/use keys as long as the setting type is different.


\begin{DoxyCode}{0}
\DoxyCodeLine{//\ UserSetting<T>\ is\ a\ wrapper\ class\ that\ handles\ saving\ and\ loading\ serializable\ values.\ It\ is\ compatible\ with\ the\ \`{}[UserSetting]`\ attribute,\ which\ is\ used\ to\ automatically\ populate\ a\ settings\ provider.}
\DoxyCodeLine{UserSetting<int>\ myIntValue\ =\ new\ UserSetting<int>(MySettingsManager.instance,\ "{}MyIntegerKey"{},\ 42,\ SettingsScopes.User);}

\end{DoxyCode}


{\ttfamily User\+Setting\texorpdfstring{$<$}{<}T\texorpdfstring{$>$}{>}} caches the current value, and keeps a copy of the default value so that it may be reset. {\ttfamily User\+Setting\texorpdfstring{$<$}{<}T\texorpdfstring{$>$}{>}} fields are also eligible for use with the {\ttfamily \mbox{[}User\+Setting\mbox{]}} attribute, which lets the {\ttfamily User\+Settings\+Provider} automatically add it to a settings inspector.\hypertarget{md__library_2_package_cache_2com_8unity_8settings-manager_0d2_80_81_2_r_e_a_d_m_e_autotoc_md485}{}\doxysection{\texorpdfstring{Settings Provider}{Settings Provider}}\label{md__library_2_package_cache_2com_8unity_8settings-manager_0d2_80_81_2_r_e_a_d_m_e_autotoc_md485}
To register your settings in the {\ttfamily Settings Window} you can either write your own {\ttfamily Settings\+Provider} implementation, or use the provided {\ttfamily User\+Settings\+Provider} and let it automatically create your interface.

Making use of {\ttfamily User\+Settings\+Provider} comes with many benefits, including a uniform look for your settings UI, support for search, and per-\/field or mass reset support.


\begin{DoxyCode}{0}
\DoxyCodeLine{using\ UnityEngine;}
\DoxyCodeLine{}
\DoxyCodeLine{namespace\ UnityEditor.SettingsManagement.Examples}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ static\ class\ MySettingsProvider}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ [SettingsProvider]}
\DoxyCodeLine{\ \ \ \ \ \ \ \ static\ SettingsProvider\ CreateSettingsProvider()}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ var\ provider\ =\ new\ UserSettingsProvider("{}Preferences/My\ Settings"{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MySettingsManager.instance,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ new\ []\ \{\ typeof(MySettingsProvider).Assembly\ \});}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ return\ provider;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}}

\end{DoxyCode}


To register a field with {\ttfamily User\+Settings\+Provider}, simply decorate it with {\ttfamily \mbox{[}User\+Setting(string display\+Category, string key)\mbox{]}}. {\ttfamily \mbox{[}Setting\+Attribute\mbox{]}} is only valid for static fields.

For more complex settings that require additional UI (or simply don\textquotesingle{}t have a built-\/in editor), you can use {\ttfamily User\+Setting\+Block\+Attribute}. This provides access to the settings provider GUI. See {\ttfamily \doxylink{_settings_examples_8cs}{Settings\+Examples.\+cs}} for more on this. 