<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RewindProject: Create a custom PropertyDrawer for a custom type</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">RewindProject
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Create a custom PropertyDrawer for a custom type</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md1740"></a> If you want to use a custom type from a custom class in Visual Scripting, and you don't have access to its source code, you must create a custom PropertyDrawer.</p>
<p>You can't assign a value to a custom type inside the Editor or initialize the value for a variable with a custom type if it doesn't have a PropertyDrawer.</p>
<blockquote class="doxtable">
<p>&zwj;[!NOTE] The class for your custom type must have the <code>[Serializable]</code> tag in its source code to create a custom PropertyDrawer. </p>
</blockquote>
<p>To create a custom PropertyDrawer:</p>
<ol type="1">
<li>[!include<a class="el" href="vs-open-project-window_8md.html">open-project-window</a>]</li>
<li>[!include<a class="el" href="vs-create-c-script-project_8md.html">create-c-script-project</a>]</li>
<li>Enter a name, such as <code>CounterDrawer</code>, for the new script file.</li>
<li>Press Enter.</li>
<li>[!include<a class="el" href="vs-open-new-external-code_8md.html">open-new-external-code</a>]</li>
<li>Remove the <code>Start</code> and <code>Update</code> functions and their comments from the script file.</li>
<li>Above the line that defines your new <code>public class</code>, add a <code>[CustomPropertyDrawer]</code> attribute.</li>
<li>In the parameters for the <code>[CustomPropertyDrawer]</code> attribute, specify a <code>type of</code> parameter with the name of the type you want to assign to this PropertyDrawer, exactly as it appears in <a class="el" href="namespace_unity.html">Unity</a>.</li>
<li>Change the <code>MonoBehaviour</code> class at the end of your <code>public class</code> definition to <code>PropertyDrawer</code>.</li>
</ol>
<blockquote class="doxtable">
<p>&zwj;[!NOTE] After you create a custom PropertyDrawer, you must generate the required property provider scripts from your Visual Scripting Project Settings. For more information, see <a class="el" href="md__library_2_package_cache_2com_8unity_8visualscripting_0d1_89_82_2_documentation_0i_2vs-configuration.html">Configure project settings</a>. </p>
</blockquote>
<p>The following is an example of a finished PropertyDrawer script:</p>
<div class="fragment"><div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_unity_editor.html">UnityEditor</a>;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_unity_engine.html">UnityEngine</a>;</div>
<div class="line">[CustomPropertyDrawer](type of(&lt;Counter&gt;))]</div>
<div class="line"><span class="keyword">public</span> <span class="keyword">class</span> CounterDrawer : PropertyDrawer</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Draw the property inside the given rect</span></div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> OnGUI(Rect position, SerializedProperty property, GUIContent label)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Using BeginProperty / EndProperty on the parent property means that</span></div>
<div class="line">        <span class="comment">// prefab override logic works on the entire property.</span></div>
<div class="line">        EditorGUI.BeginProperty(position, label, property);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Draw label</span></div>
<div class="line">        position = EditorGUI.PrefixLabel(position, GUIUtility.GetControlID(FocusType.Passive), label);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Don&#39;t indent child fields</span></div>
<div class="line">        var indent = EditorGUI.indentLevel;</div>
<div class="line">        EditorGUI.indentLevel = 0;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Calculate rects</span></div>
<div class="line">        var amountRect = <span class="keyword">new</span> Rect(position.x, position.y, 30, position.height);</div>
<div class="line">        var unitRect = <span class="keyword">new</span> Rect(position.x + 35, position.y, 50, position.height);</div>
<div class="line">        var nameRect = <span class="keyword">new</span> Rect(position.x + 90, position.y, position.width - 90, position.height);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Draw fields - passs GUIContent.none to each so they are drawn without labels</span></div>
<div class="line">        EditorGUI.PropertyField(amountRect, property.FindPropertyRelative(<span class="stringliteral">&quot;amount&quot;</span>), GUIContent.none);</div>
<div class="line">        EditorGUI.PropertyField(unitRect, property.FindPropertyRelative(<span class="stringliteral">&quot;unit&quot;</span>), GUIContent.none);</div>
<div class="line">        EditorGUI.PropertyField(nameRect, property.FindPropertyRelative(<span class="stringliteral">&quot;name&quot;</span>), GUIContent.none);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Set indent back to what it was</span></div>
<div class="line">        EditorGUI.indentLevel = indent;</div>
<div class="line"> </div>
<div class="line">        EditorGUI.EndProperty();</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="anamespace_unity_editor_html"><div class="ttname"><a href="namespace_unity_editor.html">UnityEditor</a></div><div class="ttdef"><b>Definition</b> Analytics.cs:8</div></div>
<div class="ttc" id="anamespace_unity_engine_html"><div class="ttname"><a href="namespace_unity_engine.html">UnityEngine</a></div><div class="ttdef"><b>Definition</b> FileRepositoryTests.cs:7</div></div>
</div><!-- fragment --><p>To create the rest of your custom PropertyDrawer, you must decide what fields you must display, and how you want them to display in the Editor's interface. For example, you might want to use the UIElements module to create your PropertyDrawer, or decide to use <a class="el" href="namespace_unity.html">Unity</a>'s IMGUI module.</p>
<p>For more information on how to create and design a custom PropertyDrawer, see the <a href="https://docs.unity3d.com/ScriptReference/PropertyDrawer.html">PropertyDrawer class</a> in the main <a class="el" href="namespace_unity.html">Unity</a> Scripting API and its related methods. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
